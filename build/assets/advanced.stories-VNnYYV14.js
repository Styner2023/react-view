import{j as e,r as p}from"./index-OfupEra9.js";import{u as b,P as h,L as y,H as w,a as i,C as P,b as E,E as m,K as T,c as v,A as I,I as d,d as A,t as C,g as S,l as u,e as k,f as H}from"./action-buttons-1xy8bqUX.js";import{S as g,B as R,T as O,d as x}from"./button-Fm_AxZIp.js";const B=(t,r)=>{const s={};return Object.keys(r).forEach(o=>{s[o]=r[o],t&&t[o]&&(s[o]=t[o])}),s},F=(t,r)=>{const s={};return Object.keys(t).forEach(o=>{r[o]&&t[o]&&r[o]!==t[o]&&(s[o]=t[o])}),s},V=({themeKey:t,globalSet:r,globalColor:s})=>{const[o,n]=k(s,r);return e.jsxs("label",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"160px"},children:e.jsx(v,{onChange:a=>{n(a)},"data-testid":t,code:o,placeholder:x[t],language:"css",small:!0})}),e.jsx("div",{style:{width:"16px",height:"16px",marginLeft:"8px",border:"1px solid black",borderRadius:"5px",backgroundColor:o}}),e.jsx("div",{title:t,style:{marginLeft:"8px",fontFamily:"'Helvetica Neue', Arial",fontSize:"14px"},children:t})]})},z=({theme:t,set:r})=>{const s=B(t,x),o=Object.keys(s);return e.jsxs(p.Fragment,{children:[e.jsx(A,{children:"Theme Editor"}),o.map(n=>e.jsx(V,{themeKey:n,globalColor:s[n],globalSet:a=>{const c=F({...t,[n]:a},x);r(Object.keys(c).length>0?c:void 0)}},n))]})},L={value:void 0,parse:t=>{const r={};return C(t,{JSXOpeningElement(s){const o=s.node.name,n=s.node.attributes;if(o.name==="ThemeProvider"&&n.length>0){const a=n.find(c=>c.name.name==="colors");a&&a.value.expression.properties.forEach(l=>{const j=l.key.name,f=l.value.value;x[j]!==f&&(r[j]=f)})}}}),Object.keys(r).length>0?r:void 0},generate:(t,r)=>!t||Object.keys(t).length===0?r:S("ThemeProvider",[u.jsxAttribute(u.jsxIdentifier("colors"),u.jsxExpressionContainer(u.objectExpression(Object.entries(t).map(([s,o])=>u.objectProperty(u.identifier(s),u.stringLiteral(o))))))],[r]),imports:{"your-component-library":{named:["ThemeProvider"]}}},W=()=>{const t=b({componentName:"Button",props:{children:{value:"Hello",type:h.ReactNode,description:"Visible label."},size:{value:"SIZE.default",defaultValue:"SIZE.default",options:g,type:h.Enum,description:"Defines the size of the button.",imports:{"your-button-component":{named:["SIZE"]}}}},scope:{Button:R,SIZE:g,ThemeProvider:O},imports:{"your-button-component":{named:["Button"]}},provider:L});return e.jsxs(y,{children:[e.jsx(w,{children:"Theming aka the provider API"}),e.jsxs(i,{children:["Component libraries often have some theming system. It usually uses the"," ",e.jsx("a",{href:"https://reactjs.org/docs/context.html",children:"React.Context"})," and Provider/Consumer APIs. ",e.jsx("b",{children:"How that works?"})," There is a list of global values (colors, fonts, spacing) propagated through the context and each component consumes these values through a consumer attached to that context."]}),e.jsxs(i,{children:["Often, you can also override these context values by adding an additional nested provider. Since this is a way how components can be visually adjusted,"," ",e.jsx("b",{children:"React View has a support for this Consumer/Provider pattern"}),":"]}),e.jsx(P,{...t.compilerProps,minHeight:62,placeholder:E}),e.jsx(m,{msg:t.errorProps.msg,isPopup:!0}),e.jsx(T,{...t.knobProps}),e.jsx(v,{...t.editorProps,"data-testid":"rv-editor"}),e.jsx(m,{...t.errorProps}),e.jsx(z,{theme:t.providerValue||{},set:t.actions.updateProvider}),e.jsx(I,{...t.actions}),e.jsxs(i,{children:["The ",e.jsx(d,{children:"ThemeEditor"})," is a custom built UI and utilizes the"," ",e.jsx(d,{children:"provider"})," setting. You can see the default values that our ",e.jsx(d,{children:"Button"})," component consumes. If you change any of those, the code generator will wrap the component with the"," ",e.jsx(d,{children:"ThemeProvider"})," component and also add related imports."]}),e.jsxs(i,{children:[e.jsx("b",{children:"This is an advanced and very flexible API"}),". For example, you have to be familiar with the concept of"," ",e.jsx("a",{href:"https://en.wikipedia.org/wiki/Abstract_syntax_tree",children:"AST"})," to use it. Check the source code of this page or main README for more details. We will add more docs over time."]})]})},D=W,N=({active:t,setHovered:r,index:s,onClick:o})=>{const n=p.useRef(null),a=()=>r(s),c=()=>r(0);return p.useEffect(()=>{const l=n.current;if(l)return l.addEventListener("mouseover",a),l.addEventListener("mouseout",c),()=>{l.removeEventListener("mouseover",a),l.removeEventListener("mouseout",c)}},[n.current]),e.jsx("li",{id:`heart-${s}`,role:"radio",tabIndex:0,"aria-setsize":5,"aria-checked":t,"aria-posinset":s,ref:n,title:`${s}/5`,onClick:o,style:{listStyle:"none",fontSize:"32px",margin:"5px",cursor:"pointer"},children:t?"❤️":"💙"})},_=({value:t,onChange:r})=>{const[s,o]=p.useState(0);return e.jsx("ul",{role:"radiogroup",tabIndex:0,style:{display:"flex",flexWrap:"nowrap",padding:0},children:[...Array(5).keys()].map(n=>e.jsx(N,{active:s===0?t>n:s>n,index:n+1,setHovered:o,onClick:()=>r(n+1)},n))})},M={value:{generate:t=>H.ast(String(t),{plugins:["jsx"]}).expression,parse:t=>parseInt(t,10)}},Z=({value:t,set:r})=>{const[s,o]=k(t,n=>r(n,"value"));return e.jsx(p.Fragment,{children:e.jsxs("label",{style:{fontWeight:500,fontSize:"14px",fontFamily:"'Helvetica Neue', Arial"},children:[e.jsx("p",{children:"Custom knob for the custom value prop"}),e.jsx("input",{style:{width:"284px"},list:"tickmarks",type:"range",min:"1",max:"5",step:"1",value:s,onChange:n=>{o(parseInt(n.target.value,10))}}),e.jsxs("datalist",{id:"tickmarks",children:[e.jsx("option",{value:"1"}),e.jsx("option",{value:"2"}),e.jsx("option",{value:"3"}),e.jsx("option",{value:"4"}),e.jsx("option",{value:"5"})]})]})})},$=()=>{const t=b({componentName:"Rating",props:{value:{value:3,type:h.Custom,description:"Rating value.",stateful:!0},onChange:{value:"value => setValue(value)",type:h.Function,description:"Function called when rating value is changed.",propHook:{what:"value",into:"value"}}},scope:{Rating:_},imports:{"your-rating-component":{named:["Rating"]}},customProps:M});return e.jsxs(y,{children:[e.jsx(w,{children:"Custom Props and Knobs"}),e.jsxs(i,{children:[e.jsx("b",{children:"React View supports many basic prop types out of the box"}),". Obviously, any prop value can always be edited through an input (or a tiny code editor). That is no different than writing an actual code. Boring."]}),e.jsxs(i,{children:[e.jsx("b",{children:"However, many prop types can be more accessible with a specialized UI"}),". For example, ",e.jsx(d,{children:"boolean"})," is always translated into a checkbox and ",e.jsx(d,{children:"enum"})," into an input radio or select (if we have too many options). Those are much nicer and faster to use than inputs."]}),e.jsxs(i,{children:["But what if you want to add something custom that we do not support yet? There is a ",e.jsx(d,{children:"customProp"})," API that you can use. You can control both the knob and also the internal representation of the value. In this example, we add a pretty simple custom knob. We want to represent the ",e.jsx(d,{children:"value"})," with an input slider."]}),e.jsx(P,{...t.compilerProps,minHeight:62,placeholder:E}),e.jsx(m,{msg:t.errorProps.msg,isPopup:!0}),e.jsx(Z,{value:t.knobProps.state.value.value,set:t.knobProps.set}),e.jsx(T,{...t.knobProps}),e.jsx(v,{...t.editorProps,"data-testid":"rv-editor"}),e.jsx(m,{...t.errorProps}),e.jsx(I,{...t.actions}),e.jsxs(i,{children:["However, you can go much further. For example, our Base Web component library has this concept of"," ",e.jsx("a",{href:"https://baseweb.design/guides/understanding-overrides/",children:"overrides"}),". It is a fairly complicated prop that exists on each component and lets you to customize every aspect of our components. So we have created a whole sub-playground to just better control the value of this single prop. Check the"," ",e.jsx("a",{href:"https://baseweb.design/components/button/",children:"Style Overrides tab on the Button page"}),"."," "]}),e.jsxs(i,{children:[e.jsx("b",{children:"This is an advanced and very flexible API"}),". For example, you have to be familiar with the concept of"," ",e.jsx("a",{href:"https://en.wikipedia.org/wiki/Abstract_syntax_tree",children:"AST"})," to use it. Check the source code of this page or main README for more details. We will add more docs over time."]})]})},J=$,X={title:"Advanced"},q=()=>e.jsx(J,{}),G=()=>e.jsx(D,{});typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{q as customProp,X as default,G as theming};
